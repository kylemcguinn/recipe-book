version: '3.4'

services:
  recipebook.api:
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_HTTP_PORTS=8080
      - ASPNETCORE_URLS=http://+:8080
      - RecipeBookDatabase__ConnectionString=mongodb://mongodb:27017/
    ports:
      - "50673:8080"

  mongodb:
    # OPTIONAL: Persist MongoDB data to host directory instead of Docker volume
    # Uncomment the following lines to use host-based persistence:
    # volumes:
    #   - ./data/mongodb:/data/db
    #
    # This will create a 'data/mongodb' directory in your project root
    # containing all MongoDB data files. You can backup/restore by copying this folder.
    #
    # NOTE: If you enable this, comment out 'mongodb_data:/data/db' in docker-compose.yml
    # or the volume mount here will override it.

  app:
    build:
      args:
        - VITE_API_BASE_URL=http://localhost:50673